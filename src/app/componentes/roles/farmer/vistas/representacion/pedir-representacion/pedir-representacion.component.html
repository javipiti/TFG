<div class="d-flex justify-content-start align-items-end bg-image h-25"
    style="background-image: url('assets/representacion.PNG'); height: 100vh;background-size: cover; background-repeat: no-repeat;">
    <h2 class="ms-5 mb-4 text-black">Representación </h2>
</div>

<hr>
<nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);"
    aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href=""><i class="bi bi-house-fill"></i></a></li>
        <li class="breadcrumb-item active" aria-current="page">Representación </li>
    </ol>
</nav>
<hr>


<p class="text-success"> {{exito}} </p>
<p class="text-danger"> {{error}} </p>

<div *ngIf="!mensaje; else noHay">
    <table class="table table-propio2 table-hover shadow rounded p-2">
        <thead>
            <tr>
                <th scope="col">Identificador</th>
                <th scope="col">NIF</th>
                <th scope="col"> <span>Registro autonómico <i class="bi bi-info-circle" data-bs-toggle="tooltip"
                            title="Registro del representante de la explotación en el registro autonómico"> </i> </span>
                </th>
                <th scope="col">Solicitar representación</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let r of representantes; index as i">
                <th scope="row">{{r.id}}</th>
                <td>{{r.NIF}}</td>
                <td>{{r.Autonomous_farm_register}}</td>
                <td>
                    <a style="--i:#a955ff;--j:#ea51ff;" class="iconos" data-bs-toggle="modal" data-bs-target="#solicitud" (click)="asignarID(r.id)">
                        <span class="icon"><i class="bi bi-brush descargar"></i></span>
                        <span class="title">Solicitar</span>
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<ng-template #noHay>
    {{mensaje}}
</ng-template>

<br>

<div class="d-flex justify-content-center m-5">
    <a routerLink="añadir-representante" style="--clr:#1e9bff" class="boton"> <span>Añadir representante </span>
        <i></i></a>
</div>


<!-- Modal solicitud-->
<div class="modal fade" id="solicitud" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="solicitar" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-black">Solicitud</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cancelar"></button>
            </div>
            <div class="modal-body">
                <label for="farms">Introduzca el ID de la explotación deseada:</label>
                <input type="number" [(ngModel)]="farmID">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" (click)="solicitarRepresentacion()"
                    data-bs-dismiss="modal">Solicitar</button>
            </div>
        </div>
    </div>
</div>